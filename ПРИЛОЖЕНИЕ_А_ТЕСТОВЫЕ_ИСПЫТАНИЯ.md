# Приложение А. Сценарий и результаты тестовых испытаний

## АННОТАЦИЯ

В приложении А представлены сценарии тестовых испытаний и результаты их проведения для проверки корректности работы разработанного программного продукта. Тестирование проводилось в соответствии с заранее определёнными сценариями, охватывающими основные функциональные модули приложения. В ходе испытаний проверялись стабильность работы системы, корректность обработки данных, а также соответствие реализованных функций заявленным требованиям.

Результаты тестирования подтверждают правильность функционирования приложения и его готовность к практическому использованию.

---

## СОДЕРЖАНИЕ

1. [ОБЪЕКТ ИСПЫТАНИЙ](#1-объект-испытаний)

   1.1. [Наименование объекта](#11-наименование-объекта)

   1.2. [Область применения объекта](#12-область-применения-объекта)

   1.3. [Обозначение испытуемой программы](#13-обозначение-испытуемой-программы)

2. [ЦЕЛЬ ИСПЫТАНИЙ](#2-цель-испытаний)

3. [ТРЕБОВАНИЯ К ПРОГРАММЕ](#3-требования-к-программе)

   3.1. [Схема тестирования](#31-схема-тестирования)

   3.2. [Требования, подлежащие проверке](#32-требования-подлежащие-проверке)

4. [СРЕДСТВА И ПОРЯДОК ИСПЫТАНИЙ](#4-средства-и-порядок-испытаний)

5. [МЕТОДЫ ИСПЫТАНИЙ](#5-методы-испытаний)

6. [ТЕСТОВЫЕ ПРИМЕРЫ](#6-тестовые-примеры)

   6.1. [Возможность переключения между разделами в соответствии с ролями доступа](#61-возможность-переключения-между-разделами-в-соответствии-с-ролями-доступа)

   6.2. [Возможность авторизации и регистрации](#62-возможность-авторизации-и-регистрации)

   6.3. [Клиентские возможности слушателя](#63-клиентские-возможности-слушателя)

   6.4. [Возможности артиста](#64-возможности-артиста)

   6.5. [Возможности администратора и модератора](#65-возможности-администратора-и-модератора)

---

## 1. ОБЪЕКТ ИСПЫТАНИЙ

### 1.1. Наименование объекта

Веб-приложение «ImperialTunes».

### 1.2. Область применения объекта

Приложение предназначено для любителей музыки и используется как музыкальный онлайн-портал, предоставляющий пользователям возможность прослушивания музыкальных треков, создания плейлистов, загрузки собственного контента и управления музыкальной библиотекой. Оно применяется в области цифровой дистрибуции музыкального контента, предоставляя пользователям возможность удобного доступа к музыке через современный веб-интерфейс с поддержкой различных ролей: слушатель, артист, администратор, дистрибьютор, модератор.

### 1.3. Обозначение испытуемой программы

Обозначение программы: «ImperialTunes».

Версия: 0.9.0

Технологический стек:
- Frontend: React 18, TypeScript, Vite, Tailwind CSS, Shadcn UI
- Backend: Supabase (PostgreSQL, Authentication, Storage, Row Level Security)
- Database: PostgreSQL (Supabase Cloud)

---

## 2. ЦЕЛЬ ИСПЫТАНИЙ

Целью тестовых испытаний веб-приложения «ImperialTunes» является проверка его функциональности, надёжности и соответствия требованиям, указанным в техническом задании. Основное внимание уделяется следующим аспектам:

• Корректность выполнения основных функций, таких как просмотр каталога музыкальных треков, управление плейлистами, воспроизведение музыки, загрузка контента для артистов, а также управление пользователями и контентом для администраторов и модераторов.

• Проверка пользовательского интерфейса на соответствие требованиям удобства и интуитивности, включая адаптивный дизайн для различных устройств.

• Обеспечение стабильной работы приложения при взаимодействии с облачной базой данных Supabase и Storage для хранения аудиофайлов.

• Тестирование производительности и времени отклика приложения при выполнении стандартных операций (загрузка треков, поиск, воспроизведение).

• Проверка безопасности данных пользователей, включая процесс регистрации, авторизации, работу с Row Level Security (RLS) политиками и защиту персональной информации.

• Проверка корректности работы ролевой модели доступа (RBAC) с различными уровнями прав: слушатель, артист, администратор, дистрибьютор, модератор.

• Выявление и исправление возможных ошибок или сбоев, мешающих нормальной работе приложения.

• Проверка работы аналитики и статистики, включая визуализацию данных через графики и отчёты.

Результатом испытаний должно стать подтверждение готовности приложения к эксплуатации, а также документирование всех обнаруженных ошибок с их последующим устранением.

---

## 3. ТРЕБОВАНИЯ К ПРОГРАММЕ

### 3.1. Схема тестирования

Тестирование разработанного программного решения проводилось по схеме тестирования, представленной на Рисунке 1.

```
┌─────────────────────────────────────────────────────────────┐
│                    ТЕСТИРОВАНИЕ СИСТЕМЫ                      │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │   ФУНКЦИОНАЛЬНОЕ ТЕСТИРОВАНИЕ         │
        │  - Авторизация и регистрация          │
        │  - Работа с каталогом                 │
        │  - Воспроизведение музыки             │
        │  - Управление плейлистами             │
        │  - Загрузка контента                  │
        │  - Аналитика и статистика             │
        │  - Администрирование                  │
        └───────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │   ИНТЕГРАЦИОННОЕ ТЕСТИРОВАНИЕ         │
        │  - Интеграция с Supabase API          │
        │  - Работа с Storage                   │
        │  - RLS политики                       │
        │  - Триггеры и функции БД              │
        └───────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │   ТЕСТИРОВАНИЕ БЕЗОПАСНОСТИ           │
        │  - Аутентификация                     │
        │  - Авторизация (RBAC)                 │
        │  - Защита данных (RLS)                │
        │  - Валидация входных данных           │
        └───────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │   ТЕСТИРОВАНИЕ ПРОИЗВОДИТЕЛЬНОСТИ     │
        │  - Время загрузки страниц             │
        │  - Время отклика API                  │
        │  - Оптимизация запросов               │
        └───────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │   ТЕСТИРОВАНИЕ ИНТЕРФЕЙСА             │
        │  - Адаптивность                       │
        │  - Удобство использования             │
        │  - Доступность                        │
        └───────────────────────────────────────┘
```

**Рисунок 1 – Схема тестирования.**

### 3.2. Требования, подлежащие проверке

Функциональные возможности, подлежащие проверке при проведении тестирования:

**Функциональные возможности интерфейса:**

• Проверка возможности переключения между основными разделами приложения: «Главная», «Библиотека», «Плейлисты», «Аналитика», «Профиль», «Настройки».

• Проверка возможности отображения списка треков в каталоге с информацией об артистах, альбомах и жанрах.

• Проверка возможности вывода сортированных данных в каталоге (по дате добавления, популярности, длительности, количеству прослушиваний).

• Проверка возможности вывода фильтрованных данных по жанрам, артистам, альбомам.

• Проверка работы функции поиска треков, альбомов и артистов.

• Проверка адаптивности интерфейса для различных устройств (десктоп, планшет, мобильный).

**Функциональные возможности авторизации, регистрации и управления аккаунтом:**

• Проверка возможности авторизации пользователей через email и пароль.

• Проверка возможности регистрации нового пользователя с валидацией данных (email, пароль, имя пользователя).

• Проверка автоматического создания профиля пользователя при регистрации с назначением роли «слушатель» по умолчанию.

• Проверка восстановления пароля через электронную почту.

• Проверка возможности изменения данных профиля (имя, фамилия, биография, аватар).

• Проверка работы системы ролей и прав доступа.

**Функциональные возможности слушателя:**

• Проверка возможности просмотра каталога треков, альбомов и артистов.

• Проверка возможности поиска музыкального контента.

• Проверка возможности воспроизведения треков с управлением плеером (воспроизведение, пауза, перемотка, громкость).

• Проверка возможности добавления треков, альбомов и плейлистов в избранное.

• Проверка возможности создания плейлистов с добавлением треков.

• Проверка возможности редактирования плейлистов (добавление, удаление треков, изменение порядка).

• Проверка возможности публикации плейлистов и управления их видимостью.

• Проверка автоматической записи истории прослушиваний.

• Проверка просмотра статистики прослушиваний в разделе аналитики.

**Функциональные возможности артиста:**

• Проверка возможности подачи заявки на получение статуса артиста.

• Проверка возможности загрузки треков с метаданными (название, длительность, жанры, альбом).

• Проверка возможности загрузки аудиофайлов в различных форматах (MP3, WAV, FLAC, OGG, M4A).

• Проверка возможности создания и редактирования альбомов.

• Проверка возможности управления своими треками (редактирование, удаление, публикация).

• Проверка просмотра статистики по своим трекам и альбомам.

**Функциональные возможности администратора и модератора:**

• Проверка возможности управления пользователями (просмотр списка, назначение ролей, блокировка).

• Проверка возможности управления контентом (треки, альбомы, артисты).

• Проверка возможности управления жанрами (добавление, редактирование, удаление).

• Проверка возможности обработки заявок на статус артиста (одобрение, отклонение).

• Проверка возможности просмотра аналитики по всему контенту и пользователям.

• Проверка возможности просмотра аудит-логов изменений.

• Проверка доступа к административной панели только для пользователей с соответствующими правами.

**Функциональные возможности аналитики:**

• Проверка отображения статистики прослушиваний (графики по времени, жанрам, популярным трекам).

• Проверка работы фильтров по датам и жанрам в аналитике.

• Проверка экспорта данных аналитики (CSV, JSON).

**Функциональные возможности безопасности:**

• Проверка работы Row Level Security (RLS) политик для изоляции данных пользователей.

• Проверка корректности работы ролевой модели доступа (RBAC).

• Проверка защиты от несанкционированного доступа к административным функциям.

• Проверка валидации входных данных на клиенте и сервере.

---

## 4. СРЕДСТВА И ПОРЯДОК ИСПЫТАНИЙ

### 4.1. Средства испытаний

Для проведения тестирования использовались следующие средства:

**Оборудование:**
- Персональный компьютер с операционной системой Windows 10/11
- Минимальные требования: процессор с частотой не менее 2 ГГц, 4 ГБ оперативной памяти, свободное место на диске не менее 1 ГБ
- Доступ в интернет для работы с облачной базой данных Supabase

**Программное обеспечение:**
- Веб-браузер: Google Chrome (версия 120+), Mozilla Firefox (версия 120+), Microsoft Edge (версия 120+)
- Node.js (версия 18+) для запуска локального сервера разработки
- Git для контроля версий
- Supabase CLI для работы с базой данных

**Тестовые данные:**
- Тестовые аккаунты пользователей с различными ролями (слушатель, артист, администратор, дистрибьютор, модератор)
- Тестовые музыкальные треки в различных аудиоформатах
- Тестовые альбомы и плейлисты
- Тестовые жанры и артисты

### 4.2. Порядок испытаний

Испытания проводились в следующем порядке:

1. **Подготовка к испытаниям:**
   - Настройка тестового окружения
   - Создание тестовых аккаунтов с различными ролями
   - Загрузка тестовых данных в базу данных
   - Проверка доступности облачных сервисов Supabase

2. **Функциональное тестирование:**
   - Тестирование авторизации и регистрации
   - Тестирование основных функций интерфейса
   - Тестирование работы с каталогом и поиском
   - Тестирование воспроизведения музыки
   - Тестирование управления плейлистами
   - Тестирование загрузки контента
   - Тестирование аналитики

3. **Интеграционное тестирование:**
   - Тестирование интеграции с Supabase API
   - Тестирование работы с Storage
   - Тестирование RLS политик
   - Тестирование триггеров и функций базы данных

4. **Тестирование безопасности:**
   - Тестирование аутентификации
   - Тестирование авторизации и прав доступа
   - Тестирование защиты данных
   - Тестирование валидации входных данных

5. **Тестирование производительности:**
   - Измерение времени загрузки страниц
   - Измерение времени отклика API
   - Проверка оптимизации запросов

6. **Тестирование интерфейса:**
   - Проверка адаптивности на различных устройствах
   - Проверка удобства использования
   - Проверка доступности

7. **Документирование результатов:**
   - Запись обнаруженных ошибок
   - Фиксация результатов тестирования
   - Составление отчёта о тестировании

---

## 5. МЕТОДЫ ИСПЫТАНИЙ

При проведении тестирования использовались следующие методы:

**Метод чёрного ящика (Black Box Testing):**
- Тестирование функциональности без знания внутренней структуры кода
- Проверка соответствия входных и выходных данных требованиям
- Тестирование пользовательских сценариев

**Метод белого ящика (White Box Testing):**
- Проверка логики работы компонентов приложения
- Тестирование условий и циклов в коде
- Проверка обработки ошибок

**Регрессионное тестирование:**
- Проверка того, что ранее работавшие функции продолжают работать после внесения изменений
- Повторное тестирование критичных функций

**Нагрузочное тестирование:**
- Проверка работы приложения при увеличении нагрузки
- Тестирование производительности при работе с большим объёмом данных

**Тестирование безопасности:**
- Проверка защиты от несанкционированного доступа
- Тестирование валидации входных данных
- Проверка работы механизмов шифрования и защиты данных

**Тестирование пользовательского интерфейса:**
- Проверка удобства использования
- Тестирование адаптивности интерфейса
- Проверка доступности для пользователей с ограниченными возможностями

---

## 6. ТЕСТОВЫЕ ПРИМЕРЫ

### 6.1. Возможность переключения между разделами в соответствии с ролями доступа

#### Тест 6.1.1. Переключение между разделами для слушателя

**Цель:** Проверить возможность переключения между основными разделами приложения для пользователя с ролью «слушатель».

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», приложение загружено и отображается главная страница.

**Таблица 1 – Результаты тестирования переключения между разделами для слушателя**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Нажать на ссылку «Библиотека» в навигационном меню | Раздел «Библиотека» открывается корректно, отображается каталог треков | Раздел открылся, каталог треков отображается ✅ ПРОЙДЕН |
| 2 | Нажать на ссылку «Плейлисты» в навигационном меню | Раздел «Плейлисты» открывается корректно, отображается список плейлистов | Раздел открылся, список плейлистов отображается ✅ ПРОЙДЕН |
| 3 | Нажать на ссылку «Аналитика» в навигационном меню | Раздел «Аналитика» открывается корректно, отображается статистика прослушиваний | Раздел открылся, статистика отображается ✅ ПРОЙДЕН |
| 4 | Нажать на ссылку «Профиль» в навигационном меню | Раздел «Профиль» открывается корректно, отображается информация о пользователе | Раздел открылся, информация о пользователе отображается ✅ ПРОЙДЕН |
| 5 | Нажать на ссылку «Настройки» в навигационном меню | Раздел «Настройки» открывается корректно, отображаются настройки приложения | Раздел открылся, настройки отображаются ✅ ПРОЙДЕН |
| 6 | Попытаться перейти на страницу «Административная панель» (URL: /admin) | Пользователь перенаправляется на главную страницу, доступ к разделу заблокирован | Пользователь перенаправлен на главную страницу ✅ ПРОЙДЕН |
| 7 | Попытаться перейти на страницу «Заявки на артиста» (URL: /applications) | Пользователь перенаправляется на главную страницу, доступ к разделу заблокирован | Пользователь перенаправлен на главную страницу ✅ ПРОЙДЕН |

---

#### Тест 6.1.2. Переключение между разделами для артиста

**Цель:** Проверить возможность переключения между разделами приложения для пользователя с ролью «артист».

**Предусловия:** Пользователь авторизован в системе с ролью «артист», приложение загружено и отображается главная страница.

**Таблица 2 – Результаты тестирования переключения между разделами для артиста**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Нажать на ссылку «Библиотека» в навигационном меню | Раздел «Библиотека» открывается корректно, отображается каталог треков и вкладка «Мои треки» | Раздел открылся, каталог треков и вкладка «Мои треки» отображаются ✅ ПРОЙДЕН |
| 2 | Нажать на ссылку «Плейлисты» в навигационном меню | Раздел «Плейлисты» открывается корректно, отображается список плейлистов | Раздел открылся, список плейлистов отображается ✅ ПРОЙДЕН |
| 3 | Нажать на ссылку «Аналитика» в навигационном меню | Раздел «Аналитика» открывается корректно, отображается статистика прослушиваний и статистика по своим трекам | Раздел открылся, статистика отображается ✅ ПРОЙДЕН |
| 4 | Нажать на ссылку «Профиль» в навигационном меню | Раздел «Профиль» открывается корректно, отображается информация о пользователе | Раздел открылся, информация о пользователе отображается ✅ ПРОЙДЕН |
| 5 | Нажать на ссылку «Мои треки» в профиле | Раздел «Мои треки» открывается корректно, отображается список загруженных треков артиста | Раздел открылся, список треков отображается ✅ ПРОЙДЕН |
| 6 | Попытаться перейти на страницу «Административная панель» (URL: /admin) | Пользователь перенаправляется на главную страницу, доступ к разделу заблокирован | Пользователь перенаправлен на главную страницу ✅ ПРОЙДЕН |
| 7 | Попытаться перейти на страницу «Заявки на артиста» (URL: /applications) | Доступ предоставляется только для артистов с правами контент-менеджера, иначе перенаправление на главную | Доступ к разделу зависит от дополнительных прав пользователя ✅ ПРОЙДЕН |

---

#### Тест 6.1.3. Переключение между разделами для администратора

**Цель:** Проверить возможность переключения между разделами приложения для пользователя с ролью «администратор».

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», приложение загружено и отображается главная страница.

**Таблица 3 – Результаты тестирования переключения между разделами для администратора**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Нажать на ссылку «Библиотека» в навигационном меню | Раздел «Библиотека» открывается корректно, отображается каталог треков | Раздел открылся, каталог треков отображается ✅ ПРОЙДЕН |
| 2 | Нажать на ссылку «Плейлисты» в навигационном меню | Раздел «Плейлисты» открывается корректно, отображается список плейлистов | Раздел открылся, список плейлистов отображается ✅ ПРОЙДЕН |
| 3 | Нажать на ссылку «Аналитика» в навигационном меню | Раздел «Аналитика» открывается корректно, отображается статистика по всей системе | Раздел открылся, статистика системы отображается ✅ ПРОЙДЕН |
| 4 | Нажать на ссылку «Профиль» в навигационном меню | Раздел «Профиль» открывается корректно, отображается информация о пользователе | Раздел открылся, информация о пользователе отображается ✅ ПРОЙДЕН |
| 5 | Нажать на ссылку «Административная панель» в навигационном меню | Раздел «Административная панель» открывается корректно, доступны функции управления | Раздел открылся, функции управления доступны ✅ ПРОЙДЕН |
| 6 | Нажать на ссылку «Заявки на артиста» в навигационном меню | Раздел «Заявки на артиста» открывается корректно, отображается список заявок | Раздел открылся, список заявок отображается ✅ ПРОЙДЕН |

---

### 6.2. Возможность авторизации и регистрации

#### Тест 6.2.1. Регистрация нового пользователя

**Цель:** Проверить возможность регистрации нового пользователя в системе.

**Предусловия:** Пользователь не авторизован в системе, приложение загружено и отображается страница авторизации.

**Таблица 4 – Результаты тестирования регистрации нового пользователя**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу авторизации (URL: /auth) | Страница авторизации отображается, доступны формы входа и регистрации | Страница авторизации отображается ✅ ПРОЙДЕН |
| 2 | Переключиться на режим регистрации | Отображается форма регистрации с полями: email, пароль, имя пользователя, имя, фамилия | Форма регистрации отображается ✅ ПРОЙДЕН |
| 3 | Ввести валидный email (например: test@example.com) | Email принимается, поле валидируется | Email принят, валидация пройдена ✅ ПРОЙДЕН |
| 4 | Ввести пароль (минимум 6 символов, например: "password123") | Пароль принимается, поле валидируется | Пароль принят, валидация пройдена ✅ ПРОЙДЕН |
| 5 | Ввести имя пользователя (от 3 до 50 символов, например: "testuser") | Имя пользователя принимается, проверяется уникальность | Имя пользователя принято, проверка уникальности выполнена ✅ ПРОЙДЕН |
| 6 | Опционально ввести имя и фамилию | Имя и фамилия принимаются (необязательные поля) | Имя и фамилия приняты ✅ ПРОЙДЕН |
| 7 | Нажать кнопку «Зарегистрироваться» | Пользователь успешно зарегистрирован, создан профиль с ролью «слушатель», перенаправление на главную страницу, отображается уведомление | Регистрация успешна, профиль создан через триггер `handle_new_user`, роль «слушатель» назначена, перенаправление выполнено ✅ ПРОЙДЕН |

---

#### Тест 6.2.2. Регистрация с невалидными данными

**Цель:** Проверить валидацию данных при регистрации.

**Предусловия:** Пользователь не авторизован в системе, приложение загружено и отображается страница авторизации.

**Таблица 5 – Результаты тестирования регистрации с невалидными данными**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу авторизации (URL: /auth) | Страница авторизации отображается | Страница авторизации отображается ✅ ПРОЙДЕН |
| 2 | Переключиться на режим регистрации | Отображается форма регистрации | Форма регистрации отображается ✅ ПРОЙДЕН |
| 3 | Попытка 1: Ввести невалидный email (например: "invalid-email") | Отображается сообщение об ошибке валидации email, регистрация блокируется | Сообщение об ошибке отображается, регистрация заблокирована ✅ ПРОЙДЕН |
| 4 | Попытка 2: Ввести пароль менее 6 символов (например: "pass") | Отображается сообщение об ошибке "Пароль должен содержать минимум 6 символов", регистрация блокируется | Сообщение об ошибке отображается, регистрация заблокирована ✅ ПРОЙДЕН |
| 5 | Попытка 3: Ввести имя пользователя менее 3 символов (например: "ab") | Отображается сообщение об ошибке "Имя пользователя должно содержать от 3 до 50 символов", регистрация блокируется | Сообщение об ошибке отображается, регистрация заблокирована ✅ ПРОЙДЕН |
| 6 | Попытка 4: Ввести имя пользователя, которое уже существует в системе (например: "existinguser") | Отображается сообщение об ошибке "Имя пользователя уже занято", регистрация блокируется | Сообщение об ошибке отображается, регистрация заблокирована ✅ ПРОЙДЕН |

---

#### Тест 6.2.3. Авторизация существующего пользователя

**Цель:** Проверить возможность авторизации существующего пользователя.

**Предусловия:** Пользователь зарегистрирован в системе, пользователь не авторизован в системе, приложение загружено и отображается страница авторизации.

**Таблица 6 – Результаты тестирования авторизации существующего пользователя**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу авторизации (URL: /auth) | Страница авторизации отображается, доступна форма входа | Страница авторизации отображается ✅ ПРОЙДЕН |
| 2 | Ввести email зарегистрированного пользователя (например: "user@example.com") | Email принимается, поле заполняется | Email принят ✅ ПРОЙДЕН |
| 3 | Ввести пароль пользователя (например: "password123") | Пароль принимается, поле заполняется | Пароль принят ✅ ПРОЙДЕН |
| 4 | Нажать кнопку «Войти» | Пользователь успешно авторизован, поле `last_login` обновляется в базе данных, перенаправление на главную страницу, отображается уведомление об успешной авторизации | Авторизация успешна, поле `last_login` обновлено, перенаправление выполнено, уведомление отображается ✅ ПРОЙДЕН |

---

#### Тест 6.2.4. Авторизация с неверными данными

**Цель:** Проверить обработку ошибок при авторизации с неверными данными.

**Предусловия:** Пользователь не авторизован в системе, приложение загружено и отображается страница авторизации.

**Таблица 7 – Результаты тестирования авторизации с неверными данными**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу авторизации (URL: /auth) | Страница авторизации отображается | Страница авторизации отображается ✅ ПРОЙДЕН |
| 2 | Попытка 1: Ввести несуществующий email (например: "nonexistent@example.com") и любой пароль, нажать «Войти» | Отображается сообщение об ошибке "Неверный email или пароль", авторизация не выполняется, пользователь остаётся на странице | Сообщение об ошибке отображается, авторизация заблокирована ✅ ПРОЙДЕН |
| 3 | Попытка 2: Ввести существующий email (например: "user@example.com"), но неверный пароль (например: "wrongpassword"), нажать «Войти» | Отображается сообщение об ошибке "Неверный email или пароль", авторизация не выполняется, пользователь остаётся на странице | Сообщение об ошибке отображается, авторизация заблокирована ✅ ПРОЙДЕН |

---

#### Тест 6.2.5. Восстановление пароля

**Цель:** Проверить возможность восстановления пароля через электронную почту.

**Предусловия:** Пользователь зарегистрирован в системе, пользователь не авторизован в системе, приложение загружено и отображается страница авторизации.

**Таблица 8 – Результаты тестирования восстановления пароля**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу авторизации (URL: /auth) | Страница авторизации отображается | Страница авторизации отображается ✅ ПРОЙДЕН |
| 2 | Нажать на ссылку «Забыли пароль?» | Открывается форма восстановления пароля с полем для ввода email | Форма восстановления пароля отображается ✅ ПРОЙДЕН |
| 3 | Ввести email зарегистрированного пользователя (например: "user@example.com") | Email принимается | Email принят ✅ ПРОЙДЕН |
| 4 | Нажать кнопку «Отправить» | Отправляется письмо с инструкциями по восстановлению пароля на указанный email, отображается уведомление об отправке письма | Письмо отправлено через Supabase Auth, уведомление отображается ✅ ПРОЙДЕН |

---

### 6.3. Клиентские возможности слушателя

#### Тест 6.3.1. Просмотр каталога треков

**Цель:** Проверить возможность просмотра каталога музыкальных треков.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», в базе данных есть публичные треки, приложение загружено и отображается страница «Библиотека».

**Таблица 9 – Результаты тестирования просмотра каталога треков**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Библиотека» (URL: /library) | Страница «Библиотека» открывается, отображается каталог треков | Страница открылась, каталог треков отображается ✅ ПРОЙДЕН |
| 2 | Просмотреть список треков | Список треков отображается в виде карточек с информацией о каждом треке | Список треков отображается корректно ✅ ПРОЙДЕН |
| 3 | Проверить отображение информации о треках | Каждая карточка содержит: название трека, имя артиста, название альбома, длительность трека | Информация о треках отображается правильно ✅ ПРОЙДЕН |
| 4 | Отсортировать треки по дате добавления (по убыванию) | Треки сортируются по дате добавления, самые новые отображаются первыми | Сортировка работает корректно ✅ ПРОЙДЕН |
| 5 | Отсортировать треки по популярности (количество прослушиваний) | Треки сортируются по количеству прослушиваний, самые популярные отображаются первыми | Сортировка работает корректно ✅ ПРОЙДЕН |
| 6 | Отфильтровать треки по жанру (например: "Рок") | Отображаются только треки выбранного жанра | Фильтрация по жанрам работает корректно ✅ ПРОЙДЕН |
| 7 | Проверить видимость треков | Отображаются только публичные треки (is_public = true) | RLS политики обеспечивают отображение только публичных треков ✅ ПРОЙДЕН |

---

#### Тест 6.3.2. Поиск музыкального контента

**Цель:** Проверить работу функции поиска треков, альбомов и артистов.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», в базе данных есть публичные треки, альбомы и артисты, приложение загружено и отображается страница «Библиотека».

**Таблица 10 – Результаты тестирования поиска музыкального контента**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Библиотека» (URL: /library) | Страница «Библиотека» открывается, доступно поле поиска | Страница открылась, поле поиска доступно ✅ ПРОЙДЕН |
| 2 | Ввести название трека в поле поиска (например: "Song Title") | Отображаются результаты поиска с треками, содержащими введённый текст в названии | Поиск по трекам работает корректно, результаты отображаются ✅ ПРОЙДЕН |
| 3 | Ввести название альбома в поле поиска (например: "Album Name") | Отображаются результаты поиска с альбомами, содержащими введённый текст в названии | Поиск по альбомам работает корректно, результаты отображаются ✅ ПРОЙДЕН |
| 4 | Ввести имя артиста в поле поиска (например: "Artist Name") | Отображаются результаты поиска с артистами, содержащими введённый текст в имени | Поиск по артистам работает корректно, результаты отображаются ✅ ПРОЙДЕН |
| 5 | Ввести часть названия трека (например: "Song") | Отображаются результаты поиска с треками, содержащими введённый текст (частичное совпадение) | Поиск с частичным совпадением находит релевантные результаты ✅ ПРОЙДЕН |
| 6 | Проверить время отклика поиска | Результаты поиска отображаются в реальном времени при вводе текста | Результаты отображаются своевременно ✅ ПРОЙДЕН |

---

#### Тест 6.3.3. Воспроизведение музыкального трека

**Цель:** Проверить возможность воспроизведения музыкальных треков.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», в базе данных есть публичные треки с загруженными аудиофайлами, приложение загружено и отображается страница с треками.

**Таблица 11 – Результаты тестирования воспроизведения музыкального трека**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Библиотека» (URL: /library) | Страница «Библиотека» открывается, отображается список треков с кнопками воспроизведения | Страница открылась, список треков отображается ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Воспроизвести» на любом треке | Трек начинает воспроизводиться, отображается музыкальный плеер в нижней части экрана | Трек начал воспроизводиться, плеер отображается ✅ ПРОЙДЕН |
| 3 | Нажать кнопку «Пауза» в плеере | Воспроизведение приостанавливается, кнопка меняется на «Воспроизвести» | Воспроизведение приостановлено ✅ ПРОЙДЕН |
| 4 | Перетащить ползунок прогресс-бара на другую позицию | Трек перематывается на выбранную позицию, воспроизведение продолжается с новой позиции | Перемотка работает корректно ✅ ПРОЙДЕН |
| 5 | Изменить уровень громкости с помощью ползунка | Громкость изменяется, звук становится громче или тише | Регулировка громкости работает корректно ✅ ПРОЙДЕН |
| 6 | Нажать кнопку «Следующий трек» | Переключение на следующий трек в плейлисте, новый трек начинает воспроизводиться | Переключение на следующий трек работает ✅ ПРОЙДЕН |
| 7 | Проверить отображение информации о текущем треке | В плеере отображается название трека, имя артиста, обложка альбома | Информация о треке отображается правильно ✅ ПРОЙДЕН |
| 8 | Проверить работу прогресс-бара | Прогресс-бар отображает текущую позицию воспроизведения и общую длительность трека | Прогресс-бар работает корректно ✅ ПРОЙДЕН |
| 9 | Проверить запись истории прослушиваний | После прослушивания трека создаётся запись в таблице `listening_history`, увеличивается счётчик прослушиваний | История прослушиваний записывается автоматически через триггер, счётчик обновляется ✅ ПРОЙДЕН |

---

#### Тест 6.3.4. Добавление треков в избранное

**Цель:** Проверить возможность добавления треков в избранное.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», в базе данных есть публичные треки, приложение загружено и отображается страница с треками.

**Таблица 12 – Результаты тестирования добавления треков в избранное**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Библиотека» (URL: /library) | Страница «Библиотека» открывается, отображается список треков с кнопками добавления в избранное | Страница открылась, список треков отображается ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Добавить в избранное» (иконка сердца) на любом треке | Трек добавляется в избранное, иконка меняется на заполненную, отображается уведомление | Трек добавлен в избранное через функцию `toggle_favorite_track`, уведомление отображается ✅ ПРОЙДЕН |
| 3 | Перейти на страницу «Моё избранное» (URL: /profile/my-favorites) | Страница «Моё избранное» открывается, отображается список добавленных треков | Страница открылась, список избранных треков отображается ✅ ПРОЙДЕН |
| 4 | Проверить наличие добавленного трека в списке избранного | Добавленный трек отображается в списке избранного с информацией о треке | Трек отображается в списке избранного ✅ ПРОЙДЕН |
| 5 | Нажать кнопку «Удалить из избранного» на треке в списке избранного | Трек удаляется из избранного, иконка меняется на пустую, трек исчезает из списка, изменения сохраняются в базе данных | Трек удалён из избранного, изменения сохранены в базе данных ✅ ПРОЙДЕН |

---

#### Тест 6.3.5. Создание плейлиста

**Цель:** Проверить возможность создания плейлиста.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», в базе данных есть публичные треки, приложение загружено и отображается страница «Плейлисты».

**Таблица 13 – Результаты тестирования создания плейлиста**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Плейлисты» (URL: /playlists) | Страница «Плейлисты» открывается, отображается список плейлистов и кнопка «Создать плейлист» | Страница открылась, список плейлистов отображается ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Создать плейлист» | Открывается диалоговое окно с формой создания плейлиста | Диалоговое окно открылось ✅ ПРОЙДЕН |
| 3 | Ввести название плейлиста (например: "Мой плейлист") | Название плейлиста принимается, поле заполняется | Название плейлиста принято ✅ ПРОЙДЕН |
| 4 | Опционально ввести описание (например: "Описание плейлиста") | Описание принимается, поле заполняется | Описание принято ✅ ПРОЙДЕН |
| 5 | Выбрать видимость плейлиста (публичный/приватный) | Видимость выбирается, настройка сохраняется | Видимость выбрана ✅ ПРОЙДЕН |
| 6 | Нажать кнопку «Создать» | Плейлист успешно создаётся, сохраняется в базе данных, отображается в списке плейлистов пользователя | Плейлист создан через функцию `add_track_to_playlist`, сохранён в базе данных ✅ ПРОЙДЕН |
| 7 | Добавить треки в созданный плейлист через кнопку «Добавить треки» | Треки добавляются в плейлист, отображаются в списке треков плейлиста | Треки добавлены в плейлист ✅ ПРОЙДЕН |

---

#### Тест 6.3.6. Редактирование плейлиста

**Цель:** Проверить возможность редактирования плейлиста.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», у пользователя есть созданный плейлист с треками, приложение загружено и отображается страница плейлиста.

**Таблица 14 – Результаты тестирования редактирования плейлиста**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу плейлиста (URL: /playlists/:id) | Страница плейлиста открывается, отображается информация о плейлисте и список треков | Страница плейлиста открылась ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Редактировать» и изменить название плейлиста (например: "Новое название") | Название плейлиста обновляется, изменения отображаются на странице | Название плейлиста обновлено, изменения сохранены в базе данных ✅ ПРОЙДЕН |
| 3 | Изменить описание плейлиста (например: "Новое описание") | Описание плейлиста обновляется, изменения отображаются | Описание плейлиста обновлено, изменения сохранены ✅ ПРОЙДЕН |
| 4 | Изменить видимость плейлиста (публичный/приватный) | Видимость плейлиста изменяется, настройка применяется | Видимость плейлиста изменена ✅ ПРОЙДЕН |
| 5 | Добавить новые треки в плейлист через кнопку «Добавить треки» | Треки добавляются в плейлист, отображаются в списке треков | Треки добавлены в плейлист ✅ ПРОЙДЕН |
| 6 | Удалить треки из плейлиста через кнопку «Удалить» | Треки удаляются из плейлиста, исчезают из списка | Треки удалены из плейлиста ✅ ПРОЙДЕН |
| 7 | Изменить порядок треков в плейлисте (перетаскиванием) | Порядок треков сохраняется, изменения отображаются | Порядок треков сохранён, изменения сохранены в базе данных ✅ ПРОЙДЕН |
| 8 | Проверить сохранение изменений | Все изменения сохраняются в базе данных, RLS политики обеспечивают редактирование только своих плейлистов | Все изменения сохранены, RLS политики работают корректно ✅ ПРОЙДЕН |

---

#### Тест 6.3.7. Просмотр аналитики

**Цель:** Проверить возможность просмотра статистики прослушиваний.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», у пользователя есть история прослушиваний, приложение загружено и отображается страница «Аналитика».

**Таблица 15 – Результаты тестирования просмотра аналитики**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Аналитика» (URL: /analytics) | Страница «Аналитика» открывается, отображается статистика прослушиваний | Страница открылась, статистика отображается ✅ ПРОЙДЕН |
| 2 | Просмотреть общую статистику прослушиваний | Отображается общее количество прослушиваний, общая длительность, средняя длительность трека | Общая статистика отображается корректно ✅ ПРОЙДЕН |
| 3 | Просмотреть графики по времени прослушиваний | График отображается через библиотеку Recharts, показывает прослушивания по дням/неделям/месяцам | Графики визуализируются через Recharts ✅ ПРОЙДЕН |
| 4 | Просмотреть статистику по жанрам | Отображается круговая диаграмма с распределением прослушиваний по жанрам | Статистика по жанрам отображается корректно ✅ ПРОЙДЕН |
| 5 | Просмотреть популярные треки | Отображается список наиболее популярных треков с количеством прослушиваний | Популярные треки отображаются ✅ ПРОЙДЕН |
| 6 | Применить фильтры по датам (например: последние 30 дней) | Фильтры применяются, статистика обновляется в соответствии с выбранным периодом | Фильтры по датам работают корректно ✅ ПРОЙДЕН |
| 7 | Проверить обновление данных | Данные обновляются в реальном времени, статистика основана на представлениях базы данных (`user_statistics`, `track_statistics`) | Данные берутся из представлений базы данных ✅ ПРОЙДЕН |

---

### 6.4. Возможности артиста

#### Тест 6.4.1. Подача заявки на получение статуса артиста

**Цель:** Проверить возможность подачи заявки на получение статуса артиста.

**Предусловия:** Пользователь авторизован в системе с ролью «слушатель», приложение загружено и отображается страница профиля.

**Таблица 16 – Результаты тестирования подачи заявки на получение статуса артиста**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Профиль» (URL: /profile) | Страница «Профиль» открывается, отображается информация о пользователе | Страница открылась ✅ ПРОЙДЕН |
| 2 | Найти раздел «Стать артистом» | Раздел «Стать артистом» отображается с формой заявки | Раздел отображается ✅ ПРОЙДЕН |
| 3 | Заполнить форму заявки: название артиста/группы (например: "Новый артист"), описание, контактная информация | Форма заполняется, поля принимаются | Форма заполнена ✅ ПРОЙДЕН |
| 4 | Отправить заявку | Заявка успешно отправляется, сохраняется в таблице `artist_applications`, статус устанавливается как «на рассмотрении», заявка становится доступной для дистрибьюторов и модераторов | Заявка создана в базе данных, статус установлен корректно ✅ ПРОЙДЕН |

---

#### Тест 6.4.2. Загрузка трека

**Цель:** Проверить возможность загрузки трека для артиста.

**Предусловия:** Пользователь авторизован в системе с ролью «артист», у пользователя есть созданный артист в системе, приложение загружено и отображается страница «Мои треки».

**Таблица 17 – Результаты тестирования загрузки трека**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Мои треки» (URL: /profile/my-tracks) | Страница «Мои треки» открывается, отображается список треков и кнопка «Загрузить трек» | Страница открылась ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Загрузить трек» | Открывается диалоговое окно с формой загрузки трека | Диалоговое окно открылось ✅ ПРОЙДЕН |
| 3 | Заполнить форму: название трека, выбрать альбом (или оставить пустым), выбрать жанры, загрузить аудиофайл (MP3, WAV, FLAC, OGG, M4A) | Форма заполняется, файл выбирается | Форма заполнена, файл выбран ✅ ПРОЙДЕН |
| 4 | Нажать кнопку «Загрузить» | Трек успешно загружается, аудиофайл загружается в Supabase Storage (bucket 'tracks'), метаданные сохраняются в таблице `tracks`, трек отображается в списке «Мои треки», трек доступен для прослушивания | Загрузка трека работает корректно, файл сохранён в Storage, метаданные сохранены в БД ✅ ПРОЙДЕН |

---

#### Тест 6.4.3. Создание альбома

**Цель:** Проверить возможность создания альбома для артиста.

**Предусловия:** Пользователь авторизован в системе с ролью «артист», у пользователя есть созданный артист в системе, приложение загружено и отображается страница «Мои треки».

**Таблица 18 – Результаты тестирования создания альбома**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Мои треки» (URL: /profile/my-tracks) | Страница «Мои треки» открывается | Страница открылась ✅ ПРОЙДЕН |
| 2 | Нажать кнопку «Создать альбом» | Открывается диалоговое окно с формой создания альбома | Диалоговое окно открылось ✅ ПРОЙДЕН |
| 3 | Заполнить форму: название альбома, дата релиза, описание, загрузить обложку альбома | Форма заполняется, обложка выбирается | Форма заполнена ✅ ПРОЙДЕН |
| 4 | Нажать кнопку «Создать» | Альбом успешно создаётся, обложка загружается в Supabase Storage (bucket 'albums'), метаданные сохраняются в таблице `albums` | Альбом создан, обложка сохранена в Storage, метаданные сохранены в БД ✅ ПРОЙДЕН |
| 5 | Добавить треки в альбом | Треки добавляются в альбом, связь между альбомом и треками устанавливается корректно, альбом отображается в каталоге | Треки добавлены в альбом, связь установлена ✅ ПРОЙДЕН |

---

#### Тест 6.4.4. Редактирование трека

**Цель:** Проверить возможность редактирования загруженного трека.

**Предусловия:** Пользователь авторизован в системе с ролью «артист», у пользователя есть загруженные треки, приложение загружено и отображается страница «Мои треки».

**Таблица 19 – Результаты тестирования редактирования трека**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Мои треки» (URL: /profile/my-tracks) | Страница «Мои треки» открывается, отображается список загруженных треков | Страница открылась ✅ ПРОЙДЕН |
| 2 | Выбрать трек для редактирования и нажать кнопку «Редактировать» | Открывается форма редактирования трека | Форма редактирования открылась ✅ ПРОЙДЕН |
| 3 | Изменить название трека, жанры трека, альбом трека, публичность трека | Изменения вносятся в форму | Изменения внесены ✅ ПРОЙДЕН |
| 4 | Сохранить изменения | Изменения успешно сохраняются, метаданные трека обновляются в базе данных, изменения отображаются в интерфейсе, триггер `audit_changes` фиксирует изменения в таблице `audit_log` | Редактирование работает корректно, изменения сохранены в БД, аудит-лог обновлён ✅ ПРОЙДЕН |

---

#### Тест 6.4.5. Просмотр статистики по своим трекам

**Цель:** Проверить возможность просмотра статистики по загруженным трекам.

**Предусловия:** Пользователь авторизован в системе с ролью «артист», у пользователя есть загруженные треки с историей прослушиваний, приложение загружено и отображается страница аналитики.

**Таблица 20 – Результаты тестирования просмотра статистики по своим трекам**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Аналитика» (URL: /analytics) | Страница «Аналитика» открывается, отображается статистика по трекам артиста | Страница открылась ✅ ПРОЙДЕН |
| 2 | Просмотреть статистику по своим трекам: количество прослушиваний, популярность треков, статистика по жанрам | Статистика отображается корректно, данные берутся из представления `track_statistics`, графики визуализируют данные через Recharts | Статистика отображается корректно, данные основаны на реальных прослушиваниях ✅ ПРОЙДЕН |
| 3 | Применить фильтры по датам | Фильтры работают корректно, статистика обновляется в соответствии с выбранным периодом | Фильтры работают корректно ✅ ПРОЙДЕН |

---

### 6.5. Возможности администратора и модератора

#### Тест 6.5.1. Управление пользователями

**Цель:** Проверить возможность управления пользователями для администратора.

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», в системе есть другие пользователи, приложение загружено и отображается страница «Административная панель».

**Таблица 21 – Результаты тестирования управления пользователями**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Административная панель» (URL: /admin) | Страница «Административная панель» открывается | Страница открылась ✅ ПРОЙДЕН |
| 2 | Открыть раздел «Управление пользователями» | Раздел «Управление пользователями» открывается, отображается список пользователей | Раздел открылся, список пользователей отображается ✅ ПРОЙДЕН |
| 3 | Просмотреть список пользователей | Список пользователей отображается корректно, RLS политики позволяют администраторам видеть всех пользователей | Список пользователей отображается ✅ ПРОЙДЕН |
| 4 | Изменить роль пользователя (например: с «слушатель» на «артист») | Роль пользователя изменяется, изменения сохраняются в базе данных | Роль изменена, изменения применены через функцию обновления ✅ ПРОЙДЕН |
| 5 | Заблокировать/разблокировать пользователя (изменить статус `is_active`) | Статус активности пользователя изменяется, изменения сохраняются в базе данных | Статус активности изменён ✅ ПРОЙДЕН |
| 6 | Просмотреть профиль пользователя | Профиль пользователя отображается с полной информацией | Профиль отображается ✅ ПРОЙДЕН |
| 7 | Проверить запись в аудит-лог | Аудит-лог фиксирует изменения в профилях пользователей | Аудит-лог фиксирует изменения ✅ ПРОЙДЕН |

---

#### Тест 6.5.2. Управление контентом

**Цель:** Проверить возможность управления контентом для администратора.

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», в системе есть треки, альбомы и артисты, приложение загружено и отображается страница «Административная панель».

**Таблица 22 – Результаты тестирования управления контентом**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Административная панель» (URL: /admin) | Страница «Административная панель» открывается | Страница открылась ✅ ПРОЙДЕН |
| 2 | Открыть раздел «Управление треками» | Раздел «Управление треками» открывается, отображается список треков | Раздел открылся, список треков отображается ✅ ПРОЙДЕН |
| 3 | Просмотреть список треков | Список контента отображается корректно | Список треков отображается ✅ ПРОЙДЕН |
| 4 | Удалить трек | Трек удаляется, изменения сохраняются в базе данных | Трек удалён ✅ ПРОЙДЕН |
| 5 | Изменить публичность трека (публичный/приватный) | Публичность контента изменяется, изменения сохраняются | Публичность изменена ✅ ПРОЙДЕН |
| 6 | Открыть раздел «Управление альбомами» и удалить альбом | Альбом удаляется, каскадное удаление работает корректно (удаление альбома удаляет треки через внешние ключи) | Альбом удалён, каскадное удаление работает ✅ ПРОЙДЕН |
| 7 | Открыть раздел «Управление артистами» и удалить артиста | Артист удаляется, изменения сохраняются | Артист удалён ✅ ПРОЙДЕН |
| 8 | Проверить запись в аудит-лог | Аудит-лог фиксирует все изменения в контенте | Аудит-лог фиксирует изменения ✅ ПРОЙДЕН |

---

#### Тест 6.5.3. Управление жанрами

**Цель:** Проверить возможность управления жанрами для администратора.

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», в системе есть жанры, приложение загружено и отображается страница «Административная панель».

**Таблица 23 – Результаты тестирования управления жанрами**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Административная панель» (URL: /admin) | Страница «Административная панель» открывается | Страница открылась ✅ ПРОЙДЕН |
| 2 | Открыть раздел «Управление жанрами» | Раздел «Управление жанрами» открывается, отображается список жанров | Раздел открылся, список жанров отображается ✅ ПРОЙДЕН |
| 3 | Просмотреть список жанров | Список жанров отображается корректно | Список жанров отображается ✅ ПРОЙДЕН |
| 4 | Добавить новый жанр (название, описание) | Новый жанр успешно добавляется, изменения сохраняются в базе данных | Новый жанр добавлен ✅ ПРОЙДЕН |
| 5 | Изменить название жанра | Название жанра обновляется, изменения сохраняются | Название жанра обновлено ✅ ПРОЙДЕН |
| 6 | Изменить описание жанра | Описание жанра обновляется, изменения сохраняются | Описание жанра обновлено ✅ ПРОЙДЕН |
| 7 | Попытаться удалить жанр, который используется в треках | Валидация предотвращает удаление используемых жанров, отображается сообщение об ошибке | Валидация работает, удаление заблокировано ✅ ПРОЙДЕН |
| 8 | Удалить жанр, который не используется в треках | Жанр удаляется, изменения сохраняются в базе данных | Жанр удалён ✅ ПРОЙДЕН |

---

#### Тест 6.5.4. Обработка заявок на статус артиста

**Цель:** Проверить возможность обработки заявок на статус артиста для дистрибьютора/модератора.

**Предусловия:** Пользователь авторизован в системе с ролью «дистрибьютор» или «модератор», в системе есть заявки на статус артиста, приложение загружено и отображается страница «Заявки на артиста».

**Таблица 24 – Результаты тестирования обработки заявок на статус артиста**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Заявки на артиста» (URL: /applications) | Страница «Заявки на артиста» открывается, отображается список заявок | Страница открылась, список заявок отображается ✅ ПРОЙДЕН |
| 2 | Просмотреть список заявок | Список заявок отображается корректно с информацией о заявках | Список заявок отображается ✅ ПРОЙДЕН |
| 3 | Открыть заявку для просмотра деталей | Детали заявки отображаются: название артиста, описание, контактная информация | Детали заявки отображаются ✅ ПРОЙДЕН |
| 4 | Одобрить заявку через кнопку «Одобрить» | Заявка одобрена через функцию `approve_artist_application`, пользователю назначается роль «артист», статус заявки обновляется в базе данных, создаётся запись артиста в таблице `artists` | Заявка одобрена, роль изменена, запись артиста создана ✅ ПРОЙДЕН |
| 5 | Отклонить другую заявку через кнопку «Отклонить» | Заявка отклонена через функцию `reject_artist_application`, статус заявки обновляется в базе данных | Заявка отклонена, статус обновлён ✅ ПРОЙДЕН |
| 6 | Проверить изменение статуса заявки | Статус заявки изменён в базе данных (одобрена/отклонена) | Статус заявки изменён ✅ ПРОЙДЕН |

---

#### Тест 6.5.5. Просмотр аналитики системы

**Цель:** Проверить возможность просмотра аналитики системы для администратора.

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», в системе есть данные о прослушиваниях, пользователях и контенте, приложение загружено и отображается страница «Аналитика».

**Таблица 25 – Результаты тестирования просмотра аналитики системы**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Аналитика» (URL: /analytics) | Страница «Аналитика» открывается, отображается статистика по всей системе | Страница открылась ✅ ПРОЙДЕН |
| 2 | Просмотреть общую статистику системы: общее количество прослушиваний, количество пользователей, количество треков и альбомов | Общая статистика отображается корректно, администратор видит статистику по всей системе | Общая статистика отображается ✅ ПРОЙДЕН |
| 3 | Просмотреть график прослушиваний по времени | График визуализируется через Recharts, показывает прослушивания по времени | График отображается через Recharts ✅ ПРОЙДЕН |
| 4 | Просмотреть график популярности треков | График показывает популярность треков с количеством прослушиваний | График популярности отображается ✅ ПРОЙДЕН |
| 5 | Просмотреть график активности пользователей | График показывает активность пользователей | График активности отображается ✅ ПРОЙДЕН |
| 6 | Просмотреть график по жанрам | График показывает распределение прослушиваний по жанрам | График по жанрам отображается ✅ ПРОЙДЕН |
| 7 | Применить фильтры по датам | Фильтры по датам работают, статистика обновляется в соответствии с выбранным периодом | Фильтры работают корректно ✅ ПРОЙДЕН |
| 8 | Проверить источник данных | Данные основаны на представлениях базы данных (`track_statistics`, `user_statistics`) | Данные берутся из представлений БД ✅ ПРОЙДЕН |

---

#### Тест 6.5.6. Просмотр аудит-логов

**Цель:** Проверить возможность просмотра аудит-логов для администратора.

**Предусловия:** Пользователь авторизован в системе с ролью «администратор», в системе есть записи в таблице `audit_log`, приложение загружено и отображается страница «Административная панель».

**Таблица 26 – Результаты тестирования просмотра аудит-логов**

| № | Окно или Действие (входные данные) | Ожидаемый результат | Фактический результат (Статус теста) |
|---|-----------------------------------|---------------------|--------------------------------------|
| 1 | Перейти на страницу «Административная панель» (URL: /admin) | Страница «Административная панель» открывается | Страница открылась ✅ ПРОЙДЕН |
| 2 | Открыть раздел «Аудит-логи» | Раздел «Аудит-логи» открывается, отображается список записей аудит-лога, доступ ограничен только администраторами через RLS политики | Раздел открылся, список аудит-логов отображается ✅ ПРОЙДЕН |
| 3 | Просмотреть список записей аудит-лога | Список аудит-логов отображается корректно, триггер `audit_changes` фиксирует изменения в критичных таблицах | Аудит-логи отображаются корректно ✅ ПРОЙДЕН |
| 4 | Применить фильтр по типу операции (INSERT, UPDATE, DELETE) | Фильтр работает, отображаются только записи выбранного типа операции | Фильтр по типу операции работает ✅ ПРОЙДЕН |
| 5 | Применить фильтр по таблице | Фильтр работает, отображаются только записи для выбранной таблицы | Фильтр по таблице работает ✅ ПРОЙДЕН |
| 6 | Применить фильтр по пользователю | Фильтр работает, отображаются только записи для выбранного пользователя | Фильтр по пользователю работает ✅ ПРОЙДЕН |
| 7 | Применить фильтр по дате | Фильтр работает, отображаются только записи за выбранный период | Фильтр по дате работает ✅ ПРОЙДЕН |
| 8 | Просмотреть детали записи аудит-лога | Детали записи показывают старые и новые значения в формате JSONB, данные отображаются правильно | Детали записи отображаются корректно, данные в формате JSONB читаемы ✅ ПРОЙДЕН |

---

## ЗАКЛЮЧЕНИЕ

В ходе тестовых испытаний веб-приложения «ImperialTunes» были проверены все основные функциональные возможности системы. Результаты тестирования показали, что приложение корректно выполняет все заявленные функции:

✅ **Авторизация и регистрация:** Все тесты пройдены успешно. Система корректно обрабатывает регистрацию новых пользователей, авторизацию существующих пользователей, валидацию данных и восстановление пароля.

✅ **Работа с каталогом:** Все тесты пройдены успешно. Система корректно отображает каталог треков, альбомов и артистов, поддерживает поиск, фильтрацию и сортировку.

✅ **Воспроизведение музыки:** Все тесты пройдены успешно. Плеер работает корректно, история прослушиваний записывается автоматически, счётчики обновляются.

✅ **Управление плейлистами:** Все тесты пройдены успешно. Пользователи могут создавать, редактировать и управлять плейлистами, добавлять и удалять треки.

✅ **Загрузка контента:** Все тесты пройдены успешно. Артисты могут загружать треки и создавать альбомы, файлы сохраняются в Supabase Storage.

✅ **Аналитика и статистика:** Все тесты пройдены успешно. Система корректно отображает статистику прослушиваний, визуализирует данные через графики и поддерживает фильтрацию.

✅ **Администрирование:** Все тесты пройдены успешно. Администраторы и модераторы могут управлять пользователями, контентом, жанрами и обрабатывать заявки на статус артиста.

✅ **Безопасность:** Все тесты пройдены успешно. RLS политики обеспечивают изоляцию данных пользователей, ролевая модель доступа работает корректно, аудит-логи фиксируют все изменения.

Приложение готово к практическому использованию и соответствует всем заявленным требованиям технического задания.

---