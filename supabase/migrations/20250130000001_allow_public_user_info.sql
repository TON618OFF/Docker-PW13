-- =================================================================================================
-- МИГРАЦИЯ: Разрешить чтение публичной информации о пользователях
-- =================================================================================================
-- Эта миграция добавляет политику RLS, которая позволяет всем аутентифицированным пользователям
-- читать публичную информацию о других пользователях (id, username) для отображения владельцев
-- плейлистов, артистов и другого контента.
-- =================================================================================================

-- Удаляем старую политику, если она существует (для безопасности)
DROP POLICY IF EXISTS "Users can view public user info" ON public.users;

-- Добавляем политику, которая разрешает всем аутентифицированным пользователям
-- читать данные других пользователей (необходимо для отображения владельцев плейлистов)
CREATE POLICY "Users can view public user info" ON public.users
FOR SELECT 
TO authenticated 
USING (TRUE);

